<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE en-export SYSTEM "http://xml.evernote.com/pub/evernote-export4.dtd">
<en-export export-date="20240409T043005Z" application="Evernote" version="10.82.2">
  <note>
    <title>MPLS Layer 2 VPN (MPLS L2VPN) - Class Notes</title>
    <created>20140929T172802Z</created>
    <updated>20240409T042045Z</updated>
    <note-attributes>
      <source-url>https://talkgadget.google.com/u/0/talkgadget/_/frame?v=1412729757&amp;hl=en#egtn_bnm8gi</source-url>
    </note-attributes>
    <content>
      <![CDATA[<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE en-note SYSTEM "http://xml.evernote.com/pub/enml2.dtd"><en-note style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;"><div><b>MPLS Layer 2 VPN (MPLS L2VPN)</b> (20 Sept 2014) </div><div>Lab: EoMPLS, PPP_ETHERNET, PPP_ETHERNET</div><div>- Point-to-point</div><div>     -> Any Transport over MPLS (AToM)</div><div>     -> L2TPv3</div><div> - Point-to-multipoint</div><div>     -> Virtual Private LAN Service (VPLS)</div><div> - Used to transport layer 2 payloads transparently</div><div>     -> HDLC</div><div>     -> PPP</div><div>     -> ATM</div><div>     -> Frame-relay</div><div>     -> Ethernet</div><div><br/></div><div>&lt;insert picture from page 456></div><div><br/></div><div>L2VPN Label</div><div> - Label exchange between PE routers</div><div><br/></div><div>Transport Label</div><div> - Label to reach next-hop</div><div><br/></div><div>Targeted LDP</div><div> - Multihop LDP session</div><div>     -> Uses LDP router-ids to form TCP connection</div><div> - Pseudowire-id</div><div>     -> 32 bit number which must match on both PE routers for a single connection</div><div><br/></div><div><span style="--en-highlight:yellow;background-color: #ffef9e;">int fa0/0</span></div><div>     -> Attachment circuit</div><div><span style="--en-highlight:yellow;background-color: #ffef9e;"> xconnect &lt;remote LDP router-id> &lt;pseudowire-id> encapsulation mpls</span></div><div><br/></div><div><b>Ethernet Configuration</b></div><div><br/></div><div>R1(config)# <span style="--en-highlight:yellow;background-color: #ffef9e;">int fa0/0</span></div><div><span style="--en-highlight:yellow;background-color: #ffef9e;"> no ip add</span></div><div><span style="--en-highlight:yellow;background-color: #ffef9e;"> xconnect 3.3.3.3 100 encapsulation mpls</span></div><div><br/></div><div>R3(config)# <span style="--en-highlight:yellow;background-color: #ffef9e;">int fa0/0</span></div><div><span style="--en-highlight:yellow;background-color: #ffef9e;"> no ip add</span></div><div><span style="--en-highlight:yellow;background-color: #ffef9e;"> xconnect 1.1.1.1 100 encapsulation mpls</span></div><div><br/></div><div>sh mpls l2transport vc &lt;id> [detail]</div><div><br/></div><div><b>PPP Configuration</b></div><div><br/></div><div>R1(config)# <span style="--en-highlight:yellow;background-color: #ffef9e;">int s0/1</span></div><div><span style="--en-highlight:yellow;background-color: #ffef9e;"> encap ppp</span></div><div><span style="--en-highlight:yellow;background-color: #ffef9e;"> no ip add</span></div><div><span style="--en-highlight:yellow;background-color: #ffef9e;"> xconnect 3.3.3.3 100 encapsulation mpls</span></div><div><br/></div><div>R3(config)# <span style="--en-highlight:yellow;background-color: #ffef9e;">int s0/1</span></div><div><span style="--en-highlight:yellow;background-color: #ffef9e;"> encap ppp</span></div><div><span style="--en-highlight:yellow;background-color: #ffef9e;"> no ip add</span></div><div><span style="--en-highlight:yellow;background-color: #ffef9e;"> xconnect 1.1.1.1 100 encapsulation mpls</span></div><div><br/></div><div><b>HDLC Configuration</b></div><div><br/></div><div>R1(config)# <span style="--en-highlight:yellow;background-color: #ffef9e;">int s0/1</span></div><div><span style="--en-highlight:yellow;background-color: #ffef9e;"> encap hdlc</span></div><div><span style="--en-highlight:yellow;background-color: #ffef9e;"> no ip add</span></div><div><span style="--en-highlight:yellow;background-color: #ffef9e;"> xconnect 3.3.3.3 encapsulation mpls</span></div><div><br/></div><div>R3(config)# <span style="--en-highlight:yellow;background-color: #ffef9e;">int s0/1</span></div><div><span style="--en-highlight:yellow;background-color: #ffef9e;"> encap hdlc</span></div><div><span style="--en-highlight:yellow;background-color: #ffef9e;"> no ip add</span></div><div><span style="--en-highlight:yellow;background-color: #ffef9e;"> xconnect 1.1.1.1 encapsultation mpls</span></div><div><br/></div><div><b>FRoAToM</b></div><div> - Frame-relay over AToM</div><div><br/></div><div>R1(config)# <span style="--en-highlight:yellow;background-color: #ffef9e;">int s0/1</span></div><div><span style="--en-highlight:yellow;background-color: #ffef9e;"> no ip add</span></div><div><span style="--en-highlight:yellow;background-color: #ffef9e;"> encap frame-relay</span></div><div><span style="--en-highlight:yellow;background-color: #ffef9e;"> frame-relay intf-type dce</span></div><div><span style="--en-highlight:yellow;background-color: #ffef9e;"> exit</span></div><div><span style="--en-highlight:yellow;background-color: #ffef9e;">int s0/1 100 l2transport</span></div><div>     -> 100 = DLCI</div><div><span style="--en-highlight:yellow;background-color: #ffef9e;"> xconnect 3.3.3.3 200 encapsulation</span></div><div>     -> 200 = pseudowire-id</div><div><br/></div><div>R4(config)# <span style="--en-highlight:yellow;background-color: #ffef9e;">int s0/0</span></div><div><span style="--en-highlight:yellow;background-color: #ffef9e;"> encap frame-relay</span></div><div><span style="--en-highlight:yellow;background-color: #ffef9e;"> ip add 10.0.0.4 255.0.0.0</span></div><div><span style="--en-highlight:yellow;background-color: #ffef9e;"> frame-relay ip 10.0.0.5 100 broadcast</span></div><div>     -> 100 = DLCI</div><div>     -> broadcast (optional)</div><div><br/></div><div><b>Pseudowire Class</b></div><div> - Set of AToM / L2TPv3 specific parameters which are applied to xconnect</div><div><br/></div><div><span style="--en-highlight:yellow;background-color: #ffef9e;">pseudowire-class &lt;name></span></div><div><span style="--en-highlight:yellow;background-color: #ffef9e;"> encapsulation { mpls | l2tpv3 }</span></div><div><span style="--en-highlight:yellow;background-color: #ffef9e;"> control-word</span></div><div>     -> Keeps properties of client and sent to the other end</div><div>     -> Similar to extended communities in BGP</div><div>     -> Used by some layer 2 protocols</div><div>          -> Frame-relay</div><div>               - FECN</div><div>               - BECN</div><div>               -DE-bits</div><div>          -> ATM</div><div>               - Cell loss priority (CLP)</div><div><br/></div><div><span style="--en-highlight:yellow;background-color: #ffef9e;">int fa0/0</span></div><div><span style="--en-highlight:yellow;background-color: #ffef9e;"> xconnect &lt;ip add> &lt;pw-id> pw-class &lt;name></span></div><div><br/></div><div><br/></div><div><br/></div></en-note>      ]]>
    </content>
  </note>
</en-export>
